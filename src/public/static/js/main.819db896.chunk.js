(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{280:function(e,t,a){e.exports=a(569)},285:function(e,t,a){},565:function(e,t,a){},569:function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),r=a(8),s=a.n(r),o=(a(285),a(570),a(63)),l=(a(137),a(9)),c=a(45),d=a(46),p=a(50),u=a(47),m=a(51),h=(a(289),a(76)),f=a(107),y=a(73),g=a(35),v=(a(179),a(64)),x=(a(181),a(28)),b=(a(173),a(57)),E=a(75);function O(e){if(0===e)return"0 Byte";e=Number(e);var t=parseInt(Math.floor(Math.log(e)/Math.log(1024)));return Math.round(e/Math.pow(1024,t),2)+" "+["Bytes","KB","MB","GB","TB"][t]}function k(e){if(0===e)return 0;var t=8*Number(e);return Math.round(t/Math.pow(1024,2),2)}function w(e){e=Number(e);var t=Math.floor(e/86400),a=Math.floor(e%86400/3600),n=Math.floor(e%3600/60),i=Math.floor(e%60);return(t>0?t+(1===t?" day, ":" days, "):"")+(a>0?a+(1===a?" hour, ":" hours, "):"")+(n>0?n+(1===n?" minute, ":" minutes, "):"")+(i>0?i+(1===i?" second":" seconds"):"")}function j(e){e=Number(e);var t=Math.floor(e/86400),a=Math.floor(e%86400/3600),n=Math.floor(e%3600/60);return(t>0?t+"d,":"")+(a>0?a+"h,":"")+(n>0?n+"m,":"")+(Math.floor(e%60)+"s")}var I=a(106),A=a.n(I),M=a(23),S=a.n(M);a(364),a(384),a(390),a(401);function B(e){return{title:{text:e},tooltip:{trigger:"axis"},grid:{left:"2%",right:"4%",bottom:"2%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:[]}],yAxis:[{type:"value",max:100}],series:[{name:e,type:"line",areaStyle:{normal:{}},data:[]}]}}var P=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).count=0,a.lastInBytes=0,a.lastOtBytes=0,a.state={cpuOption:B("CPU Usage"),memOption:B("Memory Usage"),conOption:{title:{text:"Connections"},tooltip:{trigger:"axis"},legend:{data:["Rtmp","Http","WebSocket"]},grid:{left:"2%",right:"4%",bottom:"2%",containLabel:!0},xAxis:[{type:"category",boundaryGap:!1,data:[]}],yAxis:[{type:"value"}],series:[{name:"Rtmp",type:"line",data:[]},{name:"Http",type:"line",data:[]},{name:"WebSocket",type:"line",data:[]}]},netOption:{title:{text:"Network Bandwidth"},tooltip:{trigger:"axis",axisPointer:{animation:!1}},axisPointer:{link:{xAxisIndex:"all"}},legend:{data:["Input","Output"]},grid:[{left:50,right:50,height:"35%"},{left:50,right:50,top:"55%",height:"35%"}],xAxis:[{type:"category",boundaryGap:!1,axisLine:{onZero:!0},data:[],show:!1},{gridIndex:1,type:"category",boundaryGap:!1,axisLine:{onZero:!0},data:[],position:"bottom"}],yAxis:[{name:"Mbps",type:"value"},{gridIndex:1,type:"value",inverse:!0}],series:[{name:"Input",type:"line",data:[]},{name:"Output",type:"line",xAxisIndex:1,yAxisIndex:1,data:[]}]}},a.fetch=function(){fetch("/api/server",{credentials:"include"}).then(function(e){return e.json()}).then(function(e){a.lastInBytes=a.lastInBytes||e.net.inbytes,a.lastOtBytes=a.lastOtBytes||e.net.outbytes;var t=new Date,n=t.toLocaleTimeString().replace(/^\D*/,""),i=Object(E.a)({},a.state.cpuOption),r=Object(E.a)({},a.state.memOption),s=Object(E.a)({},a.state.conOption),o=Object(E.a)({},a.state.netOption);a.count++>30&&(i.xAxis[0].data.shift(),i.series[0].data.shift(),r.xAxis[0].data.shift(),r.series[0].data.shift(),s.xAxis[0].data.shift(),s.series[0].data.shift(),s.series[1].data.shift(),s.series[2].data.shift(),o.xAxis[0].data.shift(),o.xAxis[1].data.shift(),o.series[0].data.shift(),o.series[1].data.shift()),i.uptime=t,i.xAxis[0].data.push(n),i.series[0].data.push(e.cpu.load),r.uptime=t,r.xAxis[0].data.push(n),r.series[0].data.push((100-100*e.mem.free/e.mem.totle).toFixed(2)),s.uptime=t,s.title.text="Connections "+(e.clients.rtmp+e.clients.http+e.clients.ws),s.xAxis[0].data.push(n),s.series[0].data.push(e.clients.rtmp),s.series[1].data.push(e.clients.http),s.series[2].data.push(e.clients.ws),o.uptime=t,o.xAxis[0].data.push(n),o.xAxis[1].data.push(n),o.series[0].data.push(k((e.net.inbytes-a.lastInBytes)/2)),o.series[1].data.push(k((e.net.outbytes-a.lastOtBytes)/2)),a.lastInBytes=e.net.inbytes,a.lastOtBytes=e.net.outbytes,a.setState({cpuOption:i,memOption:r,conOption:s,netOption:o})}).catch(function(e){})},a}return Object(m.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetch(),this.timer=setInterval(this.fetch,2e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"render",value:function(){return i.a.createElement(v.a,{style:{margin:"0 -12px"}},i.a.createElement(x.a,{span:12,style:{padding:"0 12px"}},i.a.createElement(b.a,null,i.a.createElement(A.a,{echarts:S.a,ref:"echarts_react",option:this.state.conOption,style:{height:"348px",width:"100%"}}))),i.a.createElement(x.a,{span:12,style:{padding:"0 12px"}},i.a.createElement(b.a,null,i.a.createElement(A.a,{echarts:S.a,ref:"echarts_react",option:this.state.netOption,style:{height:"348px",width:"100%"}}))),i.a.createElement(x.a,{span:12,style:{padding:"0 12px",marginTop:"16px"}},i.a.createElement(b.a,null,i.a.createElement(A.a,{echarts:S.a,ref:"echarts_react",option:this.state.cpuOption,style:{height:"300px",width:"100%"}}))),i.a.createElement(x.a,{span:12,style:{padding:"0 12px",marginTop:"16px"}},i.a.createElement(b.a,null,i.a.createElement(A.a,{echarts:S.a,ref:"echarts_react",option:this.state.memOption,style:{height:"300px",width:"100%"}}))))}}]),t}(n.Component),C=(a(263),a(136)),D=[{dataIndex:"name",key:"name",width:200},{dataIndex:"value",key:"value"}],N=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).state={data:[],loading:!1},a.fetch=function(){a.setState({loading:!0}),fetch("/api/server",{credentials:"include"}).then(function(e){return e.json()}).then(function(e){var t={key:0,name:"OS",value:e.os.arch+"_"+e.os.platform+"_"+e.os.release},n={key:1,name:"CPU",value:e.cpu.num+" x "+e.cpu.model},i={key:2,name:"Memory",value:O(e.mem.totle)},r={key:3,name:"Node.js",value:e.nodejs.version},s={key:4,name:"Uptime",value:w(e.nodejs.uptime)},o={key:5,name:"Version",value:e.version};a.setState({loading:!1,data:[t,n,i,r,s,o]})}).catch(function(e){a.setState({loading:!1})})},a}return Object(m.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.fetch()}},{key:"render",value:function(){return i.a.createElement(b.a,{title:i.a.createElement(n.Fragment,null,i.a.createElement(l.a,{type:"hdd"}),i.a.createElement("span",{style:{paddingLeft:"12px",fontSize:"16px"}},"Server Info"))},i.a.createElement(C.a,{dataSource:this.state.data,columns:D,loading:this.state.loading,pagination:!1,showHeader:!1}))}}]),t}(n.Component),T=(a(560),a(276)),V=(a(562),a(275)),L=a(176),U=a.n(L),_=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).initFlv=function(e){if(e&&U.a.isSupported()){var t=U.a.createPlayer(Object(E.a)({},a.props),a.props.config);t.attachMediaElement(e),t.load(),t.play(),a.flvPlayer=t}},a}return Object(m.a)(t,e),Object(d.a)(t,[{key:"componentWillUnmount",value:function(){this.flvPlayer&&(this.flvPlayer.unload(),this.flvPlayer.detachMediaElement(),this.flvPlayer.destroy())}},{key:"render",value:function(){var e=this.props,t=e.className,a=e.style;return i.a.createElement("video",{className:t,style:Object.assign({width:"100%"},a),ref:this.initFlv})}}]),t}(n.Component),z=a(277),H=a(272),R=a.n(H),F=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(p.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).cookies=new z.a,a.state={streamsData:[],loading:!1,visible:!1,password:""},a.columns=[{title:"App",dataIndex:"app",key:"app"},{title:"Name",dataIndex:"name",key:"name",render:function(e,t){return i.a.createElement("a",{href:"##",onClick:function(){return a.openVideo(t)}},e)}},{title:"ID",dataIndex:"id",key:"id"},{title:"IP",dataIndex:"ip",key:"ip"},{title:"Audio",children:[{title:"codec",dataIndex:"ac",key:"ac"},{title:"freq",dataIndex:"freq",key:"freq"},{title:"chan",dataIndex:"chan",key:"chan"}]},{title:"Video",children:[{title:"codec",dataIndex:"vc",key:"vc"},{title:"size",dataIndex:"size",key:"size"},{title:"fps",dataIndex:"fps",key:"fps"}]},{title:"Time",dataIndex:"time",key:"time"},{title:"Clients",dataIndex:"clients",key:"clients"}],a.updatePass=function(e){var t=e.target.value;a.setState({password:t}),a.cookies.set("pass",t,{path:"/",maxAge:31536e3})},a.openVideo=function(e){var t="";if(a.state.password){var n=R.a.create(),r=Date.now()+3e4;n.update("/".concat(e.app,"/").concat(e.name,"-").concat(r,"-").concat(a.state.password));var s=n.hex();t="?sign=".concat(r,"-").concat(s)}a.videoModal=V.a.info({icon:null,title:"Video Player",width:640,height:480,content:i.a.createElement(_,{url:"/".concat(e.app,"/").concat(e.name,".flv").concat(t),type:"flv"})})},a.fetch=function(){a.setState({loading:!0}),fetch("/api/streams",{credentials:"include"}).then(function(e){return e.json()}).then(function(e){var t=[],n=0;for(var i in e)for(var r in e[i]){var s=e[i][r].publisher,o=e[i][r].subscribers;if(s){var l=(new Date).getTime()/1e3,c=new Date(s.connectCreated).getTime()/1e3,d={key:n++,app:i,name:r,id:s.clientId,ip:s.ip,ac:s.audio?s.audio.codec+" "+s.audio.profile:"",freq:s.audio?s.audio.samplerate:"",chan:s.audio?s.audio.channels:"",vc:s.video?s.video.codec+" "+s.video.profile:"",size:s.video?s.video.width+"x"+s.video.height:"",fps:s.video?Math.floor(s.video.fps):"",time:j(l-c),clients:o.length};t.push(d)}}a.setState({loading:!1,streamsData:t})}).catch(function(e){a.setState({loading:!1})})},a}return Object(m.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.setState({password:this.cookies.get("pass")}),this.fetch()}},{key:"render",value:function(){return i.a.createElement(b.a,null,i.a.createElement(T.a.Password,{size:"large",prefix:i.a.createElement(l.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),style:{marginBottom:"16px"},placeholder:"password \u0e21\u0e32\u0e40\u0e23\u0e47\u0e27",onChange:this.updatePass,value:this.state.password}),i.a.createElement(C.a,{dataSource:this.state.streamsData,columns:this.columns,loading:this.state.loading,bordered:!0,small:!0,pagination:!1}))}}]),t}(n.Component),G=(a(565),h.a.Header),W=h.a.Sider,X=h.a.Content,q=h.a.Footer,K=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return(a=Object(p.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(i)))).fullTitle="XNXX LIVE",a.shortTitle="PNCKDEVAPP",a.state={collapsed:!1,title:a.fullTitle,pathname:"/"},a.toggle=function(){a.setState({collapsed:!a.state.collapsed,title:a.state.collapsed?a.fullTitle:a.shortTitle})},a}return Object(m.a)(t,e),Object(d.a)(t,[{key:"componentWillReceiveProps",value:function(e,t){console.log(e,t)}},{key:"render",value:function(){return i.a.createElement(f.a,null,i.a.createElement(h.a,{style:{minHeight:"100vh"}},i.a.createElement(W,{width:256,trigger:null,collapsible:!0,collapsed:this.state.collapsed},i.a.createElement("div",{className:"logo"},i.a.createElement("h1",null,this.state.title)),i.a.createElement(o.b,{theme:"dark",mode:"inline",defaultSelectedKeys:[Object(g.a)().location.pathname]},i.a.createElement(o.b.Item,{key:"/admin/"},i.a.createElement(f.b,{to:"/admin/"},i.a.createElement(l.a,{type:"dashboard"}),i.a.createElement("span",null,"DashxnXX"))),i.a.createElement(o.b.Item,{key:"/admin/streams"},i.a.createElement(f.b,{to:"/admin/streams"},i.a.createElement(l.a,{type:"video-camera"}),i.a.createElement("span",null,"STREAMS"))),i.a.createElement(o.b.Item,{key:"/admin/profile"},i.a.createElement(f.b,{to:"/admin/profile"},i.a.createElement(l.a,{type:"profile"}),i.a.createElement("span",null,"SERVER"))))),i.a.createElement(h.a,null,i.a.createElement(G,{style:{background:"#fff",padding:0}},i.a.createElement(l.a,{className:"trigger",type:this.state.collapsed?"menu-unfold":"menu-fold",onClick:this.toggle})),i.a.createElement(X,{style:{margin:"24px 16px",minHeight:280}},i.a.createElement(y.a,{exact:!0,path:"/admin",component:P}),i.a.createElement(y.a,{path:"/admin/streams",component:F}),i.a.createElement(y.a,{path:"/admin/profile",component:N})),i.a.createElement(q,{style:{textAlign:"center"}},"MediaServer \xa92022 Created by ",i.a.createElement("a",{href:"https://pnckdevap.com",rel:"noopener noreferrer",target:"_blank"},"NodeMedia"),"."))))}}]),t}(n.Component);s.a.render(i.a.createElement(K,null),document.getElementById("root"))}},[[280,1,2]]]);
//# sourceMappingURL=main.819db896.chunk.js.map